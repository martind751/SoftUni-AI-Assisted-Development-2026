# Frontend Engineer Memory

## Project Structure
- No `@` path alias configured in tsconfig -- use relative imports
- `frontend/src/lib/utils.ts` has `cn()` utility (clsx + twMerge)
- `frontend/src/components/ui/` for shared UI primitives (button.tsx exists)
- `frontend/src/components/` for app-level shared components (GenreSwitcher.tsx)
- `frontend/src/contexts/` for React context providers (GenreContext.tsx)
- `frontend/src/features/{domain}/` for feature code (schemas, types, hooks, components)
- `frontend/src/routes/` for TanStack Router file-based routes
- `routeTree.gen.ts` is auto-generated by `TanStackRouterVite` plugin

## Tailwind Theme Colors (app.css)
background, foreground, primary, primary-foreground, muted, muted-foreground, destructive, border

## Vite Config
- Proxy: `/api` -> `http://localhost:8080`
- TanStack Router plugin with `autoCodeSplitting: true`
- Tailwind v4 via `@tailwindcss/vite`

## TypeScript Config
- Strict mode, `noUnusedLocals`, `noUnusedParameters`, `verbatimModuleSyntax`
- `erasableSyntaxOnly: true` -- use `import type` for type-only imports

## Conventions Established
- Zod schemas in `schemas/{domain}.schema.ts`, types derived via `z.infer<>` in `types/{domain}.types.ts`
- Query key factory pattern: `const domainKeys = { all, list(filters?), detail(id) }`
- All fetch functions validate responses with Zod `.parse()`
- Routes use `createFileRoute` (not lazy)
- Components use theme colors (bg-primary, text-muted-foreground, etc.)
- GenreContext wraps app in __root.tsx, provides activeGenre + setActiveGenre
- Genre persisted to localStorage under key `practice-journai-genre`

## Features Implemented
- **health**: schema, types, hook (useHealthCheck), displayed on index route
- **sessions**: full CRUD with genre/status/duration/energy fields, session_notes sub-resource
  - Hooks: useSessions(filters?), useSession, useCreateSession, useUpdateSession, useDeleteSession, useCreateNote, useDeleteNote
  - Components: SessionCard, SessionForm (create+edit), SessionNotes
  - Routes: list (/sessions/), new (/sessions/new), detail+edit (/sessions/$sessionId)
  - List route filters by activeGenre via query params

- **songs**: full CRUD with two-step MusicBrainz search (artist -> recordings)
  - Song model includes: title, artist, genre, notes, duration_seconds, album, release_year, musicbrainz_artist_id
  - Hooks: useSongs(filters?), useSong, useCreateSong, useUpdateSong, useDeleteSong, useMusicBrainzArtistSearch, useMusicBrainzRecordings
  - Components: SongCard (shows album/year/duration), SongForm (create+edit with MusicBrainz), MusicBrainzSearch (two-step: artist search -> recording list)
  - MusicBrainzSearch exports `MusicBrainzSelection` interface used by SongForm
  - Routes: list (/songs/), new (/songs/new), detail+edit (/songs/$songId)
  - List route filters by activeGenre, sorts by title/artist/created_at
  - genreSchema is shared -- imported from sessions schema into songs schema

## API Endpoints (Sessions)
- GET /api/v1/sessions?genre=&status= -> Session[]
- GET/POST/PUT/DELETE /api/v1/sessions/:id
- POST /api/v1/sessions/:id/notes, DELETE /api/v1/sessions/:id/notes/:noteId

## API Endpoints (Songs)
- GET /api/v1/songs?genre=&order_by=&order_dir= -> Song[]
- GET/POST/PUT/DELETE /api/v1/songs/:id
- GET /api/v1/songs/search/musicbrainz/artists?q= -> MusicBrainzArtistResult[]
- GET /api/v1/songs/search/musicbrainz/recordings?arid= -> MusicBrainzRecordingResult[]
